<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Adam Narozniak, Alessandro Tavazzi, Nicolas dâ€™Argenlieu">
        <title>worldwide reactions</title>

        <!-- Load d3.js -->
        <script src="https://d3js.org/d3.v6.js"></script>

        <!-- Metro 4 -->
        <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
        <script src="https://cdn.metroui.org.ua/v4/js/metro.min.js"></script>

        <!-- Owned -->
        <link href="./../lib/world_reactions.css" type="text/css" rel="stylesheet">
        <script type="text/javascript" src="./../lib/world_reactions_utils.js"></script>
    </head>
<body>
<h1> Wordwide reactions </h1>

<p>
    In order to understand the conflict in Ukraine, it is also very important to get an overview of the situation abroad. 
    Indeed, Ukraine is defended by its population, but influential factors come in a wide range of flavors and from a larger area than Ukraine only.
    <br><br>
    This page details 4 different information covering the following aspects of Ukraine's invasion international impact:

    <div style="display:flex; flex-direction: row; justify-content: center; align-items: center">
        <div data-role="tile" data-effect="hover-zoom-down">
            <div class="slide-front">
                <img src="https://cdn4.iconfinder.com/data/icons/refugees-evacuee-war/280/refugees-005-512.png" class="icon">
            </div>
            <div class="slide-back d-flex flex-justify-center flex-align-center p-4 op-mauve">
                <p class="text-center">
                    <a href="#refugees_data" class="nostyleanchor">
                    Refugees
                    </a>
                </p>
            </div>
        </div>

        <div data-role="tile" data-effect="hover-zoom-down">
            <div class="slide-front">
                <img src="https://cdn0.iconfinder.com/data/icons/o022-economic-sanctions-outline/64/map_country_lockdown_lock-512.png" class="icon">
            </div>
            <div class="slide-back d-flex flex-justify-center flex-align-center p-4 op-mauve">
                <a href="#sanctions_data" class="nostyleanchor">
                <p class="text-center">
                    Sanctions
                </p>
                </a>
            </div>
        </div>

        <div data-role="tile" data-effect="hover-zoom-down">
            <div class="slide-front">
                <img src="https://cdn4.iconfinder.com/data/icons/aami-web-internet/64/aami13-13-512.png" class="icon">
            </div>
            <div class="slide-back d-flex flex-justify-center flex-align-center p-4 op-mauve">
                <p class="text-center">
                    Tweet Emotions
                </p>
            </div>
        </div>

        <div data-role="tile" data-effect="hover-zoom-down">
            <div class="slide-front">
                <img src="https://cdn0.iconfinder.com/data/icons/lagotline-survey-and-rating/64/Survey_and_Rating-05-512.png" class="icon">
            </div>
            <div class="slide-back d-flex flex-justify-center flex-align-center p-4 op-mauve">
                <p class="text-center">
                    Tweet Sentiment
                </p>
            </div>
        </div>
    </div>

</p>

<div id="refugees_data"></div>

<p>This is a graph of the incoming refugee population.</p>

<!-- <iframe title="Sanctions on Russia by Date &amp;amp; Country" aria-label="Stacked Column Chart" id="datawrapper-chart-2XXNx" src="https://datawrapper.dwcdn.net/2XXNx/13/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="550"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(e){if(void 0!==e.data["datawrapper-height"]){var t=document.querySelectorAll("iframe");for(var a in e.data["datawrapper-height"])for(var r=0;r<t.length;r++){if(t[r].contentWindow===e.source)t[r].style.height=e.data["datawrapper-height"][a]+"px"}}}))}();</script> -->

<div id="sanctions_data"></div>

<script>
    let path = './../../data/NDA_UNHCR_refugees_cleaned.csv';
    let loader = new RefugeesLoader(path);
    let promise = loader.load_data().then((data) => {

        chart = BarChart(data, {
            x: d => d[0],
            y: d => d[1],
            xDomain: d3.map(data, d => d[0]), // sort by descending frequency
            xType:d3.scaleTime,
            yFormat: "d",
            yLabel: "Date",
            width:500,
            height: 500,
            color: "steelblue",
            title: d => d[1]
        });

        const margin = {top: 10, right: 30, bottom: 30, left: 60},
            width = 900 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        d3.select("#refugees_data")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .html(chart.innerHTML)

    });

    // STACKED BAR CHART

    let pathSanctions = './../../data/NDA_Castellum_bycountry_bydate_cleaned.csv';
    let loaderSanctions = new SanctionsLoader(pathSanctions);
    let promiseSanctions = loaderSanctions.load_data().then((data) => {

        chart = StackedBarChart(data, {
            x: d => d.date,
            y: d => d.nsanctions,
            z: d => d.country,
        });

        const margin = {top: 10, right: 30, bottom: 30, left: 60},
                width = 900 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;

        d3.select("#refugees_data")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .html(chart.innerHTML)
    });

    
        
</script>
</body>
</html>